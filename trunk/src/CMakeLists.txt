CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(yocto4)
INCLUDE(share/rules.cmake)

SET(CMAKE_INSTALL_PREFIX ${PROJECT_SOURCE_DIR}/../sdk)

ADD_SUBDIRECTORY(y-main)
ADD_SUBDIRECTORY(y-thr)

INSTALL( FILES share/rules.cmake DESTINATION share/yocto )

########################################################################
IF(UNIX)
  GET_FILENAME_COMPONENT(CXX_NICKNAME ${CMAKE_CXX_COMPILER} NAME)
ELSE()
  GET_FILENAME_COMPONENT(CXX_NICKNAME ${CMAKE_CXX_COMPILER} NAME_WE)
ENDIF()

SET(CPACK_PACKAGE_DESCRIPTION_SUMMARY "yocto")
SET(CPACK_PACKAGE_VENDOR "Yann Bouret")
SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "Yann Bouret")

SET(CPACK_PACKAGE_FILE_NAME "yocto-${CMAKE_SYSTEM_NAME}-${CXX_NICKNAME}")
SET(CPACK_PACKAGING_INSTALL_PREFIX "/opt/local")
SET(CPACK_GENERATOR "ZIP")

INCLUDE(CPack)

