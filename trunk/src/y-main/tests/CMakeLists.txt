
FILE(GLOB test_srcs test-*.cpp *.hpp)
ADD_EXECUTABLE(test-main main.cpp ${test_srcs})
TARGET_LINK_YOCTO( test-main )

ENABLE_TESTING()
ADD_TEST(Platform    test-main platform)
ADD_TEST(Mutex       test-main mutex)
ADD_TEST(Round       test-main round)
ADD_TEST(Unroll      test-main unroll)
ADD_TEST(WTime       test-main wtime)
ADD_TEST(Rand        test-main rand)
ADD_TEST(Thread      test-main thread)
ADD_TEST(CorePool    test-main pool)
ADD_TEST(CoreList    test-main list)
ADD_TEST(Chunk       test-main chunk)
ADD_TEST(AtExit      test-main at_exit)
ADD_TEST(Global      test-main global)
ADD_TEST(Arena       test-main arena)
ADD_TEST(Blocks      test-main blocks)
ADD_TEST(SmallObject test-main small_object)
ADD_TEST(Object      test-main object)
ADD_TEST(Slice       test-main slice)
ADD_TEST(Carver      test-main carver)
ADD_TEST(Pooled      test-main pooled)
ADD_TEST(String      test-main string)
ADD_TEST(TypeTraits  test-main type_traits)
ADD_TEST(Functor     test-main functor)
ADD_TEST(Container   test-main container)
ADD_TEST(Sequence    test-main sequence)
ADD_TEST(Primes      test-main primes)

ADD_CUSTOM_TARGET(check-main COMMAND ${CMAKE_CTEST_COMMAND} DEPENDS test-main)
