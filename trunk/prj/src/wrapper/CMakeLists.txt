PROJECT(wrapper)

SET(SWIG_FOUND OFF)
FIND_PROGRAM(SWIG swig)

IF( ${SWIG} STREQUAL "SWIG-NOTFOUND" )
	MESSAGE( STATUS "no SWIG available")
ELSE()
	SET(SWIG_FOUND ON)
	MESSAGE( STATUS "SWIG if ${SWIG}" )
	FIND_PACKAGE(PythonLibs)
	INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})
	INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
	ADD_CUSTOM_COMMAND( OUTPUT  ${CMAKE_CURRENT_BINARY_DIR}/sample_wrapper.cpp
											COMMAND ${SWIG} -c++ -python -o ${CMAKE_CURRENT_BINARY_DIR}/sample_wrapper.cpp ${CMAKE_CURRENT_SOURCE_DIR}/sample.i
											DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/sample.hpp ${CMAKE_CURRENT_SOURCE_DIR}/sample.i )
	ADD_LIBRARY(sample MODULE sample.cpp sample_wrapper.cpp)
	TARGET_LINK_LIBRARIES(sample ${PYTHON_LIBRARIES})
	#SET_TARGET_PROPERTIES(sample PROPERTIES OUTPUT_NAME _sample.so)
ENDIF()

