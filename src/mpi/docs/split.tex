\documentclass[aps]{revtex4}
\usepackage{graphicx}
\usepackage{amssymb,amsfonts,amsmath}
\usepackage{chemarr}
\usepackage{bm}
\usepackage{pslatex}
%\usepackage{mathptmx}
\usepackage{xfrac}

\begin{document}
\title{MPI regular splitting}
\maketitle
	
\section{Description and notations.}
\subsection{Timings}
Let's say we have a 2D box with lengths $L_x,L_x$ and
we want to split the layout with $N$ cores, under the assumption
of fully periodic boundary conditions.\\

Without splitting, the local exchange time is
$$
	\Theta_s =  2\beta \left(L_x+L_y\right).	
$$
We assume that the time is normalized
by the transer rate between two cores.

\subsection{Linear splittings}

\textbf{$X$-splitting.}
The communication time is
$$
	\Theta_x =  2 L_y + 2\beta \dfrac{L_x}{N}
$$

\textbf{$Y$-splitting.}
The communication time is
$$
	\Theta_y = 2 L_x + 2\beta \dfrac{L_y}{N}
$$
We got
$$
	\Theta_x - \Theta_y = 2\left(L_y-L_x\right)\left(1-\dfrac{\beta}{N}\right)
$$	
so that splitting in the largest direction is always the best solution, under
the obvious assumption that $\beta$ is small.

\subsection{$XY$-splitting} 
We assume we set $n_x,n_y$ patches so that $n_x\times n_y=N$,
with $n_x>1$ and $n_y>1$, otherwise we are back to $X$- or $Y$-splitting.\\
The communication time is about $\Theta_{xy}=2\left(\dfrac{L_y}{n_y}+\dfrac{L_x}{n_x}\right)$,
there is no local copy.

\section{Choosing}
\subsection{Speed up assumption for linear case}
In that case, we must have a gain for $N\geq2$.
Let us assume that $L_x>L_y$, then we must ave
$$
	 2 L_y + 2\beta \dfrac{L_x}{2} \leq 2\beta \left(L_x+L_y\right)
$$
or
$$
	2 L_y \leq \beta \left(L_x+2L_y\right)
$$
and finally
$$
	\beta \geq \beta_{(x>y)}= \dfrac{2L_y}{L_x+2L_y}.
$$
Conversely, 
$$
	\beta_{(y>x)}=\dfrac{2L_x}{L_y+2L_x}.
$$
Hence, we have a minimal time to beat through splitting:
$$	
	\Theta_m = 2  \min(L_x,L_y) + 2\beta_m \dfrac{\max(L_x,L_y)}{N}.
$$
And we initialize the search with the best $X$- or $Y$- splitting, 
with the preference in the $Y$ direction in case of equality.
 
\subsection{Finding the $XY$ case}
We compare $\Theta$
\end{document}
