
FILE(GLOB test_srcs test-*.cpp)
ADD_EXECUTABLE(test-main main.cpp ${test_srcs})
TARGET_LINK_YOCTO( test-main )

ENABLE_TESTING()
ADD_TEST(Platform test-main platform)
ADD_TEST(Mutex    test-main mutex)
ADD_TEST(Round    test-main round)
ADD_TEST(Unroll   test-main unroll)
ADD_TEST(WTime    test-main wtime)
ADD_TEST(Rand     test-main rand)
ADD_TEST(Thread   test-main thread)
ADD_TEST(CorePool test-main pool)
ADD_TEST(CoreList test-main list)
ADD_TEST(Chunk    test-main chunk)
ADD_TEST(AtExit   test-main at_exit)
ADD_TEST(Global   test-main global)
ADD_TEST(Arena    test-main arena)

ADD_CUSTOM_TARGET(check-main COMMAND ${CMAKE_CTEST_COMMAND} -V DEPENDS test-main)
